(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-688e8232"],{"05b1":function(t,e,n){t.exports=n.p+"static/img/pool.9389a4a1.png"},"0aee":function(t,e,n){"use strict";n("b22f")},b22f:function(t,e,n){},daf9:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home poolContent home70"},[t._m(0),n("div",{staticClass:"pool-title centerText"},[t._v(" "+t._s(t.$t("Stake"))+" "+t._s(t.pool.stake)+" "+t._s(t.pool.projectName?"("+t.$t(t.pool.projectName)+(t.poollock?" "+String(t.poollock)+" days":"")+")":"")+" ")]),n("div",{staticClass:"bigcontent"},[n("div",{staticClass:"poolWithdraw contentleft1"},[n("div",{staticClass:"poolWithdrawContent1"},[n("span",{staticClass:"poolWithdrawContentRow"},[t._v(" "+t._s(t.$t("lockedAmount"))+" ")]),n("span",{staticClass:"poolWithdrawContentRow num"},[t._v(" "+t._s(t.lockNumber)+" "+t._s(t.pool.stake)+" ")]),n("span",{staticClass:"poolWithdrawContentRow"},[t._v(" "+t._s(t.$t("unlockIn"))+" ")]),n("span",{staticClass:"poolWithdrawContentRow num"},[t._v(" "+t._s(t._f("formatDate2")(1e3*t.lockEndTime))+" ")]),n("span",{staticClass:"poolWithdrawContentRow"},[t._v(" "+t._s(t.$t("Withdrawable"))+" "+t._s(t.pool.stake)+" ")]),n("span",{staticClass:"poolWithdrawContentRow num"},[t._v(" "+t._s(t.withdrawable)+" "+t._s(t.pool.earn)+" ")])]),n("div",{staticClass:"poolWithdrawContent2"},[n("div",{staticClass:"poolWithdrawBtnSelected",on:{click:t.withdrawDeposit}},[t._v(t._s(t.$t("withdrawLokced")))])])]),n("div",{staticClass:"poolAddOrRemove contentRight"},[n("div",{staticClass:"poolAddOrRemoveRow"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmNum,expression:"confirmNum"}],staticClass:"input",attrs:{type:"number",placeholder:t.minDepositAmount?t.$t("min")+t.minDepositAmount:""},domProps:{value:t.confirmNum},on:{input:function(e){e.target.composing||(t.confirmNum=e.target.value)}}}),n("img",{attrs:{src:t.pool.stakeIcon}}),n("div",{staticClass:"coinName"},[n("span",[t._v(t._s(t.pool.stake))])])]),n("div",{staticClass:"poolAddOrRemoveRow"},[n("span",[t._v(t._s(t.$t("Balance"))+": "+t._s(t.balance))]),n("div",{staticClass:"max",on:{click:t.max}},[t._v(t._s(t.$t("Max")))])]),n("div",{staticClass:"poolAddOrRemoveRow"},t._l(t.lockTime,(function(e){return n("div",{class:t.currentLockTime===e?"noselected selected":"noselected",on:{click:function(n){return t.selectLockTime(e)}}},[t._v(" "+t._s(e)+t._s(97===t.chainId?"M":"W")+" ")])})),0),n("div",{staticClass:"poolConfirm centerText",on:{click:function(e){"Approve"==t.poolConfirm?t.approve():t.staking()}}},[t._v(t._s(t.$t(t.poolConfirm))+" ")]),n("div",{staticClass:"flex justify-center p"},[t._v("Deposit fee: 0%, Withdrawal fee: 0%")])]),n("div",{staticClass:"poolStatistics contentleft2"},[n("div",{staticClass:"poolStatisticsRow"},[n("div",{staticClass:"poolStatisticsTitle"},[n("span",[t._v(t._s(t.$t("APR")))])]),n("div",{staticClass:"poolStatisticsContent"},[n("span",[t._v(t._s(t.apr)+" %")])])]),n("div",{staticClass:"poolStatisticsRow"},[n("div",{staticClass:"poolStatisticsTitle"},[n("span",[t._v(t._s(t.$t("Liquidity")))])]),n("div",{staticClass:"poolStatisticsContent"},[n("span",[t._v(t._s(t.liquidity)+" "+t._s(t.pool.stake))])])])]),n("p")])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header"},[a("img",{staticClass:"titleImg",attrs:{src:n("05b1"),alt:""}})])}],o=n("1da1"),s=(n("a9e3"),n("96cf"),n("d399")),c=n("b775"),i=n("a232"),l=n("84d7"),u=n("901e");u.config({POW_PRECISION:100,EXPONENTIAL_AT:[-20,80]});var p={data:function(){return{lockTime:[],currentLockTime:null,lockNumber:0,lockEndTime:0,network:"bsc",contractAddress:null,pool:null,poolContract:null,stakeTokenContract:null,liquidity:0,vesting:0,withdrawable:0,apr:0,balance:0,confirmNum:null,poolConfirm:"Approve",minDepositAmount:0,chainId:null,poollock:null}},created:function(){this.chainId=this.$web3Obj.chainId,this.currentLockTime=this.lockTime[0],this.network=this.$route.query.network,this.pool=this.$config.project.node[this.network][this.$route.query.index],"MiningWithCakeFixedTerm"===this.pool.contractType&&(97===this.chainId?this.lockTime=[10,120,220,320,420,600]:this.lockTime=[1,12,22,32,42,52]),this.contractAddress=this.pool.contractAddress,this.getPoolUserData()},methods:{getPoolUserData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r,o,s,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.poolContract=new t.$web3Obj.web3.eth.Contract(t.$config.abi[t.pool.contractType],t.contractAddress),e.next=3,t.poolContract.methods.getUserInfo(t.$web3Obj.currentAddress).call();case 3:if(n=e.sent,"MiningWithCakeFixedTerm"!==t.pool.contractType){e.next=19;break}return a=n.userInfo,t.lockEndTime=a.lockEndTime,t.lockNumber=Object(i["transformationNumber"])(Object(i["add"])(4,a.currentUnlocked,a.currentStaked),4,t.pool.stakeDecimals),t.withdrawable=1e3*a.lockEndTime<=(new Date).getTime()?t.lockNumber:0,e.next=11,t.poolContract.methods.overview().call();case 11:return r=e.sent,t.liquidity=Object(i["transformationNumber"])(r.poolInfo.currentStaked,4,t.pool.stakeDecimals?t.pool.stakeDecimals:18),e.next=15,t.getLockApr(r,t.pool,604800);case 15:t.apr=e.sent,t.stakeTokenContract=new t.$web3Obj.web3.eth.Contract(t.$config.abi.token,r.poolInfo.stakeToken),e.next=34;break;case 19:if("MiningWithOHM"!==t.pool.contractType){e.next=34;break}return e.next=22,t.poolContract.methods.getPoolInfo().call();case 22:return o=e.sent,s=n.timestamps,s.length>0&&(t.lockEndTime=s[s.length-1]),t.poollock=o.lockTime/3600/24,t.lockNumber=Object(i["transformationNumber"])(n.stakeAmount,4,t.pool.stakeDecimals),t.withdrawable=Object(i["transformationNumber"])(n.withdrawable,4,t.pool.stakeDecimals),t.liquidity=Object(i["transformationNumber"])(o.totalUserStake,4,t.pool.stakeDecimals),c=new t.$web3Obj.web3.eth.Contract(t.$config.abi.IOlympusStaking,o.target),e.next=32,c.methods.OHM().call();case 32:l=e.sent,t.stakeTokenContract=new t.$web3Obj.web3.eth.Contract(t.$config.abi.token,l);case 34:return e.next=36,t.updateBalance();case 36:t.getAllow();case 37:case"end":return e.stop()}}),e)})))()},getAllow:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.stakeTokenContract.methods.allowance(t.$web3Obj.currentAddress,t.contractAddress).call();case 2:n=e.sent,Object(i["comparedTo"])(n,Object(i["transformationNumber18"])(t.balance,t.pool.stakeDecimals))>=0?t.poolConfirm="Confirm":t.poolConfirm="Approve";case 4:case"end":return e.stop()}}),e)})))()},getLockApr:function(t,e,n){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var o,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.path&&1!==e.status&&0!=t.poolInfo.currentStaked&&0!=t.poolInfo.rewardPerBlock){r.next=2;break}return r.abrupt("return",0);case 2:return o=Object(i["transformationNumber18"])(n*t.boostWeight/t.maxLockDuration/1e13+1,e.stakeDecimals),s=n/3.2*t.poolInfo.rewardPerBlock*o/t.poolInfo.totalShares,r.next=6,Object(l["getUSDTValue"])(e.path,a.$config.project.network[a.$route.query.network].router);case 6:return c=r.sent,c=Object(i["divs"])(2,100*s,c),r.abrupt("return",c);case 9:case"end":return r.stop()}}),r)})))()},withdrawInterest:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.withdrawable){e.next=3;break}return Object(s["a"])("withdraw amount must > 0"),e.abrupt("return");case 3:return e.prev=3,e.next=6,c["a"].contractSend(t.poolContract.methods.withdraw().send({from:t.$web3Obj.currentAddress,value:0}));case 6:t.getPoolUserData(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),Object(s["a"])("withdraw fail");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))()},selectLockTime:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.currentLockTime=t,e.apr="",n.next=4,e.poolContract.methods.overview().call();case 4:return a=n.sent,n.next=7,e.getLockApr(a,e.pool,Object(i["mul"])(t,604800));case 7:e.apr=n.sent;case 8:case"end":return n.stop()}}),n)})))()},updateBalance:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.balance=0,e.next=3,t.stakeTokenContract.methods.balanceOf(t.$web3Obj.currentAddress).call();case 3:n=e.sent,t.balance=Object(i["transformationNumber"])(n,18,t.pool.stakeDecimals?t.pool.stakeDecimals:18);case 5:case"end":return e.stop()}}),e)})))()},approve:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].contractSend(t.stakeTokenContract.methods.approve(t.contractAddress,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff").send({from:t.$web3Obj.currentAddress,value:0}));case 3:t.getAllow(),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),Object(s["a"])("stake token approve : fail");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},withdrawDeposit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Number(t.lockNumber)<=0)){e.next=3;break}return Object(s["a"])("withdraw amount must > 0"),e.abrupt("return");case 3:if(!(Number(t.withdrawable)<=0)){e.next=6;break}return Object(s["a"])("unlock time not reached"),e.abrupt("return");case 6:if(e.prev=6,"MiningWithCakeFixedTerm"!==t.pool.contractType){e.next=12;break}return e.next=10,c["a"].contractSend(t.poolContract.methods.unstake().send({from:t.$web3Obj.currentAddress,value:0}));case 10:e.next=15;break;case 12:if("MiningWithOHM"!==t.pool.contractType){e.next=15;break}return e.next=15,c["a"].contractSend(t.poolContract.methods.userWithdraw(t.withdrawable).send({from:t.$web3Obj.currentAddress,value:0}));case 15:t.getPoolUserData(),e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](6),console.error(e.t0),Object(s["a"])("withdraw fail");case 22:case"end":return e.stop()}}),e,null,[[6,18]])})))()},staking:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(null==t.confirmNum||""===t.confirmNum||t.confirmNum<t.minDepositAmount)){e.next=3;break}return Object(s["a"])("amount must  >= "+t.minDepositAmount),e.abrupt("return");case 3:if(!(Object(i["comparedTo"])(t.confirmNum,t.balance)>0)){e.next=6;break}return Object(s["a"])("no enough balance"),e.abrupt("return");case 6:if(n=Object(i["transformationNumber18"])(t.confirmNum,t.pool.stakeDecimals),e.prev=7,"MiningWithCakeFixedTerm"!==t.pool.contractType){e.next=14;break}return a=Object(i["mul"])(t.currentLockTime,604800),e.next=12,c["a"].contractSend(t.poolContract.methods.stake(n,a).send({from:t.$web3Obj.currentAddress,value:0}));case 12:e.next=17;break;case 14:if("MiningWithOHM"!==t.pool.contractType){e.next=17;break}return e.next=17,c["a"].contractSend(t.poolContract.methods.userStake(n).send({from:t.$web3Obj.currentAddress,value:0}));case 17:t.getPoolUserData(),e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](7),console.error(e.t0),Object(s["a"])("staking fail");case 24:case"end":return e.stop()}}),e,null,[[7,20]])})))()},max:function(){0!=this.balance&&(this.confirmNum=this.balance)}}},m=p,d=(n("0aee"),n("2877")),f=Object(d["a"])(m,a,r,!1,null,"031a1409",null);e["default"]=f.exports}}]);